# AI SLOP Detector Configuration
# Copy to .slopconfig.yaml and customize

version: "2.0"

# Metric thresholds
thresholds:
  ldr:
    # Logic Density Ratio grades
    excellent: 0.85  # S++
    good: 0.75       # S
    acceptable: 0.60 # A
    warning: 0.45    # B
    critical: 0.30   # C
    
  bcr:
    # Buzzword-to-Code Ratio
    pass: 0.50
    warning: 1.0
    fail: 2.0
    
  ddc:
    # Deep Dependency Check
    excellent: 0.90
    good: 0.70
    acceptable: 0.50
    suspicious: 0.30

# Slop score calculation weights
weights:
  ldr: 0.40  # 40% weight
  bcr: 0.30  # 30% weight
  ddc: 0.30  # 30% weight

# File patterns to ignore
ignore:
  - "**/__init__.py"
  - "tests/**"
  - "**/*_test.py"
  - "**/test_*.py"
  - "**/*.pyi"
  - ".venv/**"
  - "venv/**"
  - "build/**"
  - "dist/**"
  - "**/.git/**"
  # Innovation zones (v2.6.3) - exempt from strict analysis
  - "playground/**"
  - "labs/**"
  - "experiments/**"
  - "prototypes/**"
  - "sandbox/**"

# Consent-based complexity (v2.6.3)
# Allows developers to whitelist intentional complexity
consent_complexity:
  enabled: true
  # Require reason for all @slop.ignore decorators
  require_reason: true
  # Log ignored functions in reports
  report_ignored: true
  # Valid rules that can be selectively ignored
  valid_rules:
    - "LDR"
    - "INFLATION"
    - "DDC"
    - "PLACEHOLDER"

# Exception handling
exceptions:
  # ABC interfaces get reduced LDR penalty
  abc_interface:
    enabled: true
    penalty_reduction: 0.5  # 50% reduction
    
  # Config files get BCR exemption
  config_files:
    enabled: true
    patterns:
      - "**/settings.py"
      - "**/config.py"
      - "**/constants.py"
      - "**/*_config.py"
      
  # Type stub files
  type_stubs:
    enabled: true
    patterns:
      - "**/*.pyi"

# Buzzword categories (context-aware)
buzzwords:
  # AI/ML terms - justified if torch/tf is used
  ai_ml:
    terms: ["neural", "transformer", "deep learning", "reinforcement learning"]
    justify_with: ["torch", "tensorflow", "keras", "jax"]
    
  # Architecture terms - justified if complex patterns present
  architecture:
    terms: ["byzantine", "fault-tolerant", "distributed", "scalable"]
    justify_with: ["multiprocessing", "concurrent.futures", "asyncio"]
    
  # Performance terms - justified if optimization code present
  performance:
    terms: ["optimized", "optimization", "performant", "efficient"]
    justify_with: ["numba", "cython", "vectorized", "cached"]

# Evidence detection (v2.6.2)
evidence:
  tests:
    # Integration test detection
    integration:
      enabled: true
      # Directory path patterns
      dir_patterns:
        - "tests/integration/**"
        - "integration_tests/**"
        - "tests/e2e/**"
        - "e2e/**"
        - "tests/it/**"
        - "it/**"
      # File name patterns
      file_patterns:
        - "test_integration_*.py"
        - "*_integration_test.py"
        - "it_*.py"
        - "test_e2e_*.py"
        - "*_e2e_test.py"
      # Pytest markers to detect
      pytest_markers:
        - "integration"
        - "e2e"
        - "slow"
      # Runtime signals detection
      runtime_signals:
        enabled: true
        keywords:
          - "testcontainers"
          - "docker-compose"
          - "TestClient"
          - "httpx.AsyncClient"
          - "requests.Session"

# Quality claims validation (v2.6.2)
claims:
  # Production-ready claim requirements
  production_ready:
    require_integration_tests: true
    require_unit_tests: true
    require_error_handling: true
    require_logging: true
    require_input_validation: true
    require_config_management: true

  # Enterprise-grade claim requirements
  enterprise_grade:
    require_integration_tests: true
    require_unit_tests: true
    require_error_handling: true
    require_logging: true
    require_monitoring: true
    require_documentation: true
    require_security: true

  # Scalable claim requirements
  scalable:
    require_integration_tests: true
    require_caching: true
    require_async_support: true
    require_connection_pooling: true
    require_rate_limiting: true

  # Fault-tolerant claim requirements
  fault_tolerant:
    require_integration_tests: true
    require_error_handling: true
    require_retry_logic: true
    require_circuit_breaker: true
    require_fallback: true

# Reporting options
reporting:
  # Output formats
  formats:
    - text
    - html
    - json
    
  # HTML report customization
  html:
    theme: "dark"
    show_charts: true
    show_code_snippets: true
    
  # Fail CI if slop score exceeds threshold
  ci:
    fail_threshold: 30
    fail_on_critical: true

# Advanced options
advanced:
  # Use radon for complexity calculation
  use_radon: true
  
  # Enable ML-based detection (experimental)
  ml_detection: false
  
  # Weight files by LOC in project analysis
  weighted_analysis: true
  
  # Minimum file size to analyze (LOC)
  min_file_size: 10
  
  # Maximum file size (skip very large files)
  max_file_size: 10000
